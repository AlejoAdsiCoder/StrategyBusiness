<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Question</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/game1.css">
    <link rel="stylesheet" href="css/plugin.css">
    <!-- <link rel="stylesheet" href="css/game2.css"> -->
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/normalize.css">
</head>
<body>
    <div class="game-wrap">
        <div class="container">
            <div class="game-wrapper-financiero">
                <div id="stage04" class="startRight stage">
                    <div class="top">
                        <div class="timer"><span id="lblTimer">30</span></div>
                        <div class="helpers">
                            <div id="linksHelp" style="display:none;">
                                <a id="lnkHelpPortal" href="@(urlPortal)" target="_blank">
                                </a>
                                <a id="lnkHelpTwitter" href="@(urlTwitterIcetex)" target="_blank">
                                </a>
                                <a id="lnkHelpCall" target="_blank">
                                </a>
                            </div>
                            <span id="spanImageHelpPortal" class="box-tool">
                                <img id="imgHelpPortal" alt="Help Portal" src="~/Content/images/game1/arrow02.svg" title="">
                                <div id="divHelpPortal" class="disable-tool"></div>
                            </span>
                            <span id="spanImageFiftenHelp" class="box-tool">
                                <img id="btnHelpQuestion" data-id="@(Model.IdQuestion)" src="~/Content/images/game1/50-50-02.svg" title="">
                                <div id="divHelpQuestion" class="disable-tool"></div>
                            </span>
                            <span id="spanImageHelpTwitter" class="box-tool">
                                <img id="imgHelpTwitter" alt="Help Twitter" src="~/Content/images/game1/number-02.svg" title="" >
                                <div id="divHelpTwitter" class="disable-tool"></div>
                            </span>
                            @*<span id="spanImageHelpCall" class="box-tool">
                                <img id="imgHelpCall" alt="Help Call" src="~/Content/images/game1/phone-02.svg" title="BogotÃ¡ 417 3535 o a nivel nacional al 01 900 331 3777" class="tooltip">
                                <div id="divHelpCall" class="disable-tool"></div>
                            </span>*@
                        </div>
                    </div>
                    <div class="question-box">
                        <div class="question"><span id="lblHeaderQuestion"></span></div>
                        <ul class="answers">
                            <!-- @if (Model.ListAnswers.Any())
                            {
                                string idAnswerLabel = string.Empty;
                                int countLabel = 1;
                                foreach (var item in Model.ListAnswers)
                                {
                                    idAnswerLabel = string.Format("{0}{1}", "lblAnswer", countLabel);
                                    countLabel++;
                                    <li id="@idAnswerLabel" class="lblAnswerClass" data-id="@(item.IdAnswer)">
                                        <a href="javascript:void(0)">
                                            <span>
                                                @item.LetterAnswer
                                            </span>
                                            @item.TexAnswer
                                        </a>
                                    </li>
                                }
                            } -->
                            <li id="idAnswerLabel" class="lblAnswerClass"">
                                <a href="javascript:void(0)">
                                    <span id="letterAns">
                                        
                                    </span>
                                    <span id="TextAns">

                                    </span>
                                </a>
                            </li>
                        </ul>
                        <!-- <div id="loadingRequestAnswer" class="advice"><span>@ViewContext.HttpContext.GetGlobalResourceObject("App_GlobalResourcesGameFinancialStrategy", "LabelJuegoProcessAnswers").ToString()</span></div> -->
                    </div>
                    <!-- <div class="stars-footer">
                        @for (int i = 0; i < sizeAnswersCorrect; i++)
                        {
                            <span>
                                <img src="~/Content/images/game1/star-02.svg">
                            </span>
                        }
                        @for (int i = 0; i < sizeAnswerIncorrect; i++)
                        {
                            <span>
                                <img src="~/Content/images/game1/star-01.svg">
                            </span>
                        }
                        <span class="level">@string.Format("{0} {1}", @ViewContext.HttpContext.GetGlobalResourceObject("App_GlobalResourcesGameFinancialStrategy", "LabelJuegoNivel").ToString(), sizeAnswersCorrect)</span>
                        
                    </div> -->
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/TweenLite.min.js"></script>
    <script src="js/CSSPlugin.min.js"></script>
    <script src="js/royal-slider-min.js"></script>
    <script src="js/bx-slider.js"></script>
    <script src="js/jquery.tooltipster.min.js"></script>
    <script src="js/animation.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript">

        var timerValue = 30;
        var selectedAnswer = false;
        var typeHelp = {
            PORTAL: 1,
            TWITTER: 2,
            CALL: 3
        };
        var requestQuestion = false;
        $(document).ready(function () {

            fetch("js/data.js")
                .then(json => alert(json));

            listQuestion();

            $.ajax({
                url: "./js/data.js",
                dataType: "json",
                type: "POST",
                error: function (data)
                {
                console.log("error");
                console.log(data);
                alert("Error peticion");
                },
                success: function (datos) {
                    console.log(datos);
                    // var datos = JSON.parse(data);
                    let html = '';
                    let title = '<div class="question"><span id="lblHeaderQuestion">'+data[i].question+'</span></div>';

                    var data = JSON.parse(datos);
                    $.each(data, function(i)  {
                        html += '<li id="idAnswerLabel" class="lblAnswerClass"">'+
                            '<a href="javascript:void(0)">'+
                                    '<span id="letterAns">'+data[i].answers.letter+'</span>'+
                                    '<span id="TextAns">'+data[i].answers.option+'</span>'+
                            '</a>'+
                        '</li>'
                    });
                    $(".question-box").append(title);
                    $(".question-box").append(html);
                }
            })
    
            $('.tooltip').tooltipster({
                trigger: 'click',
                position: "bottom",
                multiple: true,
                onlyOne: true
            });
            $("#loadingRequestAnswer").hide();
            $('#stage04').animate({
                left: "-=100%",
                opacity: "1"
            }, 800);
            verifyImageStyleHelp();
            $("#btnHelpQuestion").click(function ()
            {
    
                var getIdQuestion = $(this).data("id");
                GetHelpFiftyPercent(getIdQuestion);
    
            });
    
            // $("#imgHelpPortal").click(function ()
            // {
    
            //     var isCheckedHelpPortal = '@(IsCheckedHelpPortal)'
            //     if (isCheckedHelpPortal == 'False')
            //     {
            //         $('#divHelpPortal').addClass('disable-tool active');
            //         GetHelpQuestion(typeHelp.PORTAL.valueOf());
            //     }
            // });
    
            // $("#imgHelpTwitter").click(function ()
            // {
    
            //     var isCheckedHelpTwitter = '@(IsCheckedHelpTwitter)'
            //     if (isCheckedHelpTwitter == 'False')
            //     {
            //         $('#divHelpTwitter').addClass('disable-tool active');
            //         GetHelpQuestion(typeHelp.TWITTER.valueOf());
            //     }
    
            // });
    
            // $("#imgHelpCall").click(function ()
            // {
            //     $('#divHelpCall').addClass('disable-tool active');
            //     var isCheckedHelpCall = '@(IsCheckedHelpCall)'
            //     if (isCheckedHelpCall == 'False') {
            //         GetHelpQuestion(typeHelp.CALL.valueOf());
            //     }
    
            // });
    
            // $(".lblAnswerClass").click(function ()
            // {
            //     if (!requestQuestion) {
    
            //         requestQuestion = true;
            //         $("#loadingRequestAnswer").show();
            //         var getIdAnswer = $(this).data("id");
            //         var getIdElement = $(this).attr('id');
            //         $('#' + getIdElement).addClass('select');
            //         selectedAnswer = true;
            //         setTimeout(function () {
            //             validateAnswer(getIdAnswer, getIdElement);
    
            //         }, 2500)
            //     }
    
            // });
        });

        function listQuestion() {

            
            $.ajax({
                url: "js/data.json",
                dataType: "json",
                method: "POST",
                success: function (data) {
                    alert(data);
                    // var datos = JSON.parse(data);
                    let html = '';
                    let title = '<div class="question"><span id="lblHeaderQuestion">'+data[i].question+'</span></div>';

                    $.each(data, function(i)  {
                        html += '<li id="idAnswerLabel" class="lblAnswerClass"">'+
                            '<a href="javascript:void(0)">'+
                                    '<span id="letterAns">'+data[i].answers.letter+'</span>'+
                                    '<span id="TextAns">'+data[i].answers.option+'</span>'+
                            '</a>'+
                        '</li>'
                    });
                    $(".question-box").append(title);
                    $(".question-box").append(html);
                }
            })
        }

        timer = setTimeout('temporizador()', 1000);
        function temporizador() {
            $(document).ready(function () {
                if (timerValue != 0 && !selectedAnswer) {
                    timerValue--;
                    if (timerValue > 9) {
                        $("#lblTimer").text(timerValue);
                    }
                    else {
                        $("#lblTimer").text("0" + timerValue);
                    }
                    timer = setTimeout("temporizador()", 1000);
                }
                else {
                    if (timerValue == 0) {
                        NextQuestion();
                    }
                }
            });
        }
        // function validateAnswer(idAnswer, idElement)
        // {
        //     $.ajax({
        //         url: "@Url.Action("GetValidateQuestionAnswer", "QuestionFinancialLiteracy")",
        //         data: { idAnswerValue: idAnswer },
        //         dataType: "json",
        //         type: "POST",
        //         error: function (data)
        //         {
        //             console.log("error");
        //             console.log(data);
        //             alert("Error peticion");
        //         },
        //         success: function (data)
        //         {
        //             console.log(data);
        //             if (data == "True") {
        //                 $('#' + idElement).addClass('correct');
        //             }
        //             else {
        //                 $('#' + idElement).addClass('wrong');
        //             }
        //             setTimeout(function () {
        //                 NextQuestion();
    
        //             }, 2500)
        //         }
        //     });
        // }
        // function GetHelpFiftyPercent(idQuestion) {
        //     var isChecked = '@(IsCheckedHelpFiftyPercent)'
        //     console.log(isChecked);
        //     if (isChecked == 'False')
        //     {
        //         $('#divHelpQuestion').addClass('disable-tool active');
        //         selectedAnswer = true;
        //         $.ajax({
        //             url: "@Url.Action("GetHelpFiftyPercent", "QuestionFinancialLiteracy")",
        //             data: { idQuestionValue: idQuestion },
        //             dataType: "json",
        //             type: "POST",
        //             error: function () {
        //                 alert("Error peticion");
        //             },
        //             success: function (data)
        //             {
        //                 //alert(data);
        //                 isChecked = 'True';
        //                 console.log(data);
        //                 $(".lblAnswerClass").hide();
        //                 $.each(JSON.parse(data), function (idx, obj)
        //                 {
        //                     var getIdAnswerResponse = obj.IDRespuesta;
        //                     //alert(getIdAnswerResponse);
        //                     $(".lblAnswerClass").each(function () {
        //                         var getIdAnswer = $(this).attr("data-id");
        //                         var idLabelAnswer = $(this).attr("id");
        //                         if (getIdAnswer == getIdAnswerResponse) {
        //                             $("#" + idLabelAnswer).show();
        //                         }
        //                     });
        //                     //alert(obj.IDRespuesta);
        //                 });
    
        //                 //for (var i = 0; i < data.length; i++)
        //                 //{
        //                 //    var getIdAnswerResponse = data[i];
        //                 //    //alert(getIdAnswerResponse);
        //                 //    $(".lblAnswerClass").each(function () {
        //                 //        var getIdAnswer = $(this).attr("data-id");
        //                 //        var idLabelAnswer = $(this).attr("id");
        //                 //        if (getIdAnswer == getIdAnswerResponse) {
        //                 //            $("#" + idLabelAnswer).show();
        //                 //        }
        //                 //    });
        //                 //}
        //                 selectedAnswer = false;
        //                 //temporizador();
        //                 $("#btnHelpQuestion").attr('disabled', 'disabled');
        //             }
        //         });
        //     }
        // }
        // function GetHelpQuestion(typeHelpValue) {
        //     selectedAnswer = true;
        //     $.ajax({
        //         url: "@Url.Action("GetHelpQuestion", "QuestionFinancialLiteracy")",
        //         data: { typeHelp: typeHelpValue },
        //         dataType: "json",
        //         type: "POST",
        //         error: function () {
        //             alert("Error peticion");
        //         },
        //         success: function (data) {
        //             if (data == "True")
        //             {
        //                 selectedAnswer = false;
        //                 //temporizador();
        //                 switch (typeHelpValue) {
        //                     case typeHelp.PORTAL:
        //                         document.getElementById("lnkHelpPortal").click();
        //                         $("#imgHelpPortal").attr('disabled', true);
        //                         $("#imgHelpPortal").unbind('click');
        //                         $("#imgHelpPortal").attr('disabled', 'disabled');
        //                         break;
        //                     case typeHelp.TWITTER:
        //                         document.getElementById("lnkHelpTwitter").click();
        //                         $("#imgHelpTwitter").attr('disabled', true);
        //                         $("#imgHelpTwitter").unbind('click');
        //                         $("#imgHelpTwitter").attr('disabled', 'disabled');
        //                         break;
        //                     case typeHelp.CALL:
        //                         $("#imgHelpCall").attr('disabled', true);
        //                         $("#imgHelpCall").unbind('click');
        //                         $("#imgHelpCall").attr('disabled', 'disabled');
        //                         break;
        //                     default:
        //                         break;
        //                 }
        //             }
        //         }
        //     });
        // }
        function verifyImageStyleHelp()
        {
            var isCheckedHelpPortal = '@(IsCheckedHelpPortal)'
            var isCheckedFiftyPercent = '@(IsCheckedHelpFiftyPercent)'
            var isCheckedHelpTwitter = '@(IsCheckedHelpTwitter)'
            var isCheckedHelpCall = '@(IsCheckedHelpCall)'
            console.log("Test colores");
            console.log(isCheckedFiftyPercent);
            if (isCheckedHelpPortal == 'True')
            {
                $('#divHelpPortal').addClass('disable-tool active');
            }
            if (isCheckedFiftyPercent == 'True')
            {
                $('#divHelpQuestion').addClass('disable-tool active');
            }
            if (isCheckedHelpTwitter == 'True')
            {
                $('#divHelpTwitter').addClass('disable-tool active');
            }
            if (isCheckedHelpCall == 'True')
            {
                $('#divHelpCall').addClass('disable-tool active');
            }
    
        }
        function NextQuestion() {
            location.reload();
        }
    </script>
</body>
</html>
